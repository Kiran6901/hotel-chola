{%- comment -%}
  IMAGE CAROUSEL SECTION
  Auto-rotating promotional image slider using schema blocks
{%- endcomment -%}

{%- if section.blocks.size > 0 -%}
  <div class="carousel-container" id="app-download" data-speed="{{ section.settings.speed | default: 3000 }}">
    <div class="carousel-slides">
      {%- for block in section.blocks -%}
        {%- if block.settings.slide_image != blank -%}
          <div
            class="carousel-slide {% if forloop.first %}active{% endif %}"
            style="transform: translateX({{ forloop.index0 | times: 100 }}%);"
            {{ block.shopify_attributes }}
          >
            {%- if block.settings.slide_link != blank -%}
              <a href="{{ block.settings.slide_link }}">
            {%- endif -%}

            <img
              src="{{ block.settings.slide_image | image_url: width: 1200 }}"
              alt="{{ block.settings.slide_alt | default: shop.name }}"
              loading="lazy"
            >

            {%- if block.settings.slide_link != blank -%}
              </a>
            {%- endif -%}
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>
  </div>
{%- endif -%}

{% schema %}
{
  "name": "Image Carousel",
  "settings": [
    {
      "type": "range",
      "id": "speed",
      "label": "Auto-play Speed (ms)",
      "min": 1000,
      "max": 10000,
      "step": 500,
      "default": 3000,
      "unit": "ms",
      "info": "Time between slide transitions"
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "slide_image",
          "label": "Slide Image",
          "info": "Recommended size: 1200x425px"
        },
        {
          "type": "text",
          "id": "slide_alt",
          "label": "Image Alt Text",
          "default": "Promotional slide"
        },
        {
          "type": "url",
          "id": "slide_link",
          "label": "Slide Link (optional)"
        }
      ]
    }
  ],
  "max_blocks": 10,
  "presets": [
    {
      "name": "Image Carousel",
      "blocks": [
        { "type": "slide" },
        { "type": "slide" },
        { "type": "slide" }
      ]
    }
  ]
}
{% endschema %}

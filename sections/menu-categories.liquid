{%- comment -%}
  MENU CATEGORIES SECTION
  Horizontal scrollable category circles linking to collections
{%- endcomment -%}

<div class="explore-menu" id="explore-menu">
  {%- if section.settings.title != blank -%}
    <h1>{{ section.settings.title }}</h1>
  {%- endif -%}

  {%- if section.settings.description != blank -%}
    <p class="explore-menu-text">{{ section.settings.description }}</p>
  {%- endif -%}

  <div class="explore-menu-list">
    {%- if section.blocks.size > 0 -%}
      {%- for block in section.blocks -%}
        <div class="explore-menu-list-item" {{ block.shopify_attributes }}>
          {%- if block.settings.category_link != blank -%}
            <a href="{{ block.settings.category_link }}" style="text-decoration: none; color: inherit;">
          {%- endif -%}

            {%- if block.settings.category_image != blank -%}
              <img
                src="{{ block.settings.category_image | image_url: width: 200 }}"
                alt="{{ block.settings.category_name | escape }}"
                loading="lazy"
              >
            {%- else -%}
              <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #FF4C24, #ff7e5f); display: flex; align-items: center; justify-content: center;">
                <i class="fa-solid fa-utensils" style="font-size: 24px; color: #fff;"></i>
              </div>
            {%- endif -%}
            <p>{{ block.settings.category_name }}</p>

          {%- if block.settings.category_link != blank -%}
            </a>
          {%- endif -%}
        </div>
      {%- endfor -%}
    {%- else -%}
      {%- comment -%} Default 10 categories when no blocks are configured {%- endcomment -%}
      {%- assign default_categories = "Tandoori,Naan & Roti,Rice & Noodles,Biryani,Fresh Juice,Desserts,Snacks & Starters,Veg. Gravies,Non-Veg Gravies,Sea Food" | split: "," -%}
      {%- assign category_icons = "fire,bread-slice,bowl-rice,plate-wheat,glass-water,ice-cream,cookie-bite,leaf,drumstick-bite,fish" | split: "," -%}
      {%- for cat in default_categories -%}
        <div class="explore-menu-list-item">
          <a href="/collections/{{ cat | handle }}" style="text-decoration: none; color: inherit;">
            <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #FF4C24, #ff7e5f); display: flex; align-items: center; justify-content: center;">
              <i class="fa-solid fa-{{ category_icons[forloop.index0] }}" style="font-size: 24px; color: #fff;"></i>
            </div>
            <p>{{ cat }}</p>
          </a>
        </div>
      {%- endfor -%}
    {%- endif -%}
  </div>

  <hr>
</div>

{% schema %}
{
  "name": "Menu Categories",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Explore our menu"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Section Description",
      "default": "Check out our menu and find something you'll love! We have a mix of dishes, from your everyday favorites to special treats, all made fresh and tasty."
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#ffffff"
    }
  ],
  "blocks": [
    {
      "type": "category",
      "name": "Category",
      "settings": [
        {
          "type": "text",
          "id": "category_name",
          "label": "Category Name",
          "default": "Category"
        },
        {
          "type": "image_picker",
          "id": "category_image",
          "label": "Category Image",
          "info": "Round image, recommended 200x200px"
        },
        {
          "type": "url",
          "id": "category_link",
          "label": "Category Link"
        }
      ]
    }
  ],
  "max_blocks": 15
}
{% endschema %}

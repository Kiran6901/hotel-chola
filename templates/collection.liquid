{%- comment -%}
  COLLECTION TEMPLATE
  Displays all products in a collection with filter/sort capabilities
  Equivalent to the "All Foods" page in the original React app
{%- endcomment -%}

<div class="collection-header">
  <h1>{{ collection.title }}</h1>
  {%- if collection.description != blank -%}
    <p>{{ collection.description }}</p>
  {%- endif -%}
</div>

{%- comment -%} Category type filters â€” links to each collection {%- endcomment -%}
{%- assign category_names = "All,Tandoori,Naan & Roti,Rice & Noodles,Biryani,Fresh Juice,Desserts,Snacks & Starters,Veg. Gravies,Non-Veg Gravies,Sea Food" | split: "," -%}
{%- assign category_handles = "all,tandoori,naan-roti,rice-noodles,biryani,fresh-juice,desserts,snacks-starters,veg-gravies,non-veg-gravies,sea-food" | split: "," -%}
{%- assign category_icons = "utensils,fire,bread-slice,bowl-rice,plate-wheat,glass-water,ice-cream,cookie-bite,leaf,drumstick-bite,fish" | split: "," -%}

<div class="explore-menu-list" style="margin-bottom: 30px;">
  {%- for cat in category_names -%}
    {%- assign cat_handle = category_handles[forloop.index0] -%}
    {%- assign is_active = false -%}
    {%- if cat_handle == collection.handle -%}
      {%- assign is_active = true -%}
    {%- endif -%}
    {%- if cat_handle == 'all' and collection.handle == 'all' -%}
      {%- assign is_active = true -%}
    {%- endif -%}

    <div class="explore-menu-list-item">
      <a href="/collections/{{ cat_handle }}" style="text-decoration: none; color: inherit;">
        <div class="category-filter-circle {% if is_active %}active{% endif %}">
          <i class="fa-solid fa-{{ category_icons[forloop.index0] }}"></i>
        </div>
        <p>{{ cat }}</p>
      </a>
    </div>
  {%- endfor -%}
</div>
<hr style="margin: 10px 0; height: 2px; background-color: #E2E2E2; border: none;">

{%- comment -%} Product Grid with Pagination {%- endcomment -%}
{% paginate collection.products by 12 %}
  {%- if collection.products.size > 0 -%}
    <div class="collection-grid">
      {%- for product in collection.products -%}
        {% render 'product-card', product: product %}
      {%- endfor -%}
    </div>

    {%- if paginate.pages > 1 -%}
      <div style="text-align: center; margin: 40px 0;">
        {{ paginate | default_pagination }}
      </div>
    {%- endif -%}
  {%- else -%}
    <div class="no-items-message">
      <p>No products found in this collection.</p>
      <a href="/collections/all" class="view-all-button" style="display: inline-block; margin-top: 20px;">
        Browse All Products
      </a>
    </div>
  {%- endif -%}
{% endpaginate %}
